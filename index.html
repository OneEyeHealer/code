<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
  <link rel="stylesheet" href="css//main.css" />
  <link rel="icon" href="assets/img/logo.svg" />
  <!-- fontaesome file -->
  <script src="https://kit.fontawesome.com/4cd0f195bd.js" crossorigin="anonymous"></script>
  <title>Competitive Coding</title>
</head>

<body>
  <header>
    <nav class="navbar navbar-light bg-light rounded-pill">
      <a class="navbar-brand" href="#">
        <img src="./assets/img/logo.svg" width="30" height="30" class="d-inline-block align-top" alt="code"
          loading="lazy" />
        Code
      </a>
    </nav>
  </header>
  <main>
    <section class="pt-4 w-100">
      <div class="container">
        <h1 class="text-center text-light">Code List</h1>
        <div id="myData" class="row row-cols-1 row-cols-md-2, row-cols-lg-3"></div>
      </div>
    </section>
  </main>
  <script>
    fetch("./assets/code.json")
      .then(function (response) {
        return response.json();
      })
      .then(function (data) {
        console.log(data);
        appendData(data);
      })
      .catch(function (err) {
        console.log("error: " + err);
      });

    function appendData(data) {
      var mainContainer = document.getElementById("myData");
      for (var i = 0; i < data.length; i++) {
        // crating dom elements
        var div = document.createElement("div");
        var card = document.createElement("div");
        var image = document.createElement("img");
        var card_body = document.createElement("div");
        var heading = document.createElement("h5");
        var anchor = document.createElement("a");
        var para = document.createElement("p");
        var file_info = document.createElement("div");

        // styling
        div.classList.add("col", "mb-4");
        card.classList.add("card");
        image.classList.add("d-inline-block", "mr-2", "logo");
        card_body.classList.add("card-body", 'text-align', "mx-auto");
        heading.classList.add("card-title", "d-inline-block");
        para.classList.add("card-text");
        file_info.classList.add("file-info", "text-center");
        // fetching data
        heading.innerHTML = data[i].data.statement;
        // para.innerHTML = data[i].data.p;
        //   seting values
        image.src = './assets/img/logo.svg';
        image.setAttribute("width", "25");
        anchor.href = data[i].data.url;

        // appending created dom elements.
        mainContainer.append(div);
        div.append(card);
        card.append(card_body);
        card_body.appendChild(image);
        card_body.appendChild(anchor);
        anchor.append(heading);
        // card_body.appendChild(para);
        for (let [key, value] of Object.entries(data[i].data.details)) {
          let classes = "";
          let icon = "";
          classes += key === "github" ? "text-secondary" : "text-success";
          icon +=
            key === "github" ?
            `<i class="fab fa-github" aria-hidden="true"></i>` :
            `<i class="fas fa-code"; aria-hidden="true"></i>`;
          var links = document.createElement("a");
          var span = document.createElement("span");
          links.href = value;
          links.setAttribute("target", "_blank");
          links.classList.add("px-3", classes);
          span.innerHTML = icon + " " + key;
          card_body.append(file_info);
          file_info.appendChild(links);
          links.appendChild(span);
        }
      }
    }
  </script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous">
  </script>
</body>

</html>